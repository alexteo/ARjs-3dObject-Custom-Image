<!DOCTYPE html>
<html>
    <!-- include A-Frame obviously -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <!-- include ar.js for A-Frame with image tracking -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="js/aframe-extras.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function(){
            var drone = document.querySelector('#drone_scene');
            console.log('drone: ' + drone.tagName);
            drone.addEventListener('model-loaded',function(){
                console.log('loaded');
                alert('loaded');
            })
        })
    </script>
    <style>
        .arjs-loader{
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .arjs-loader div{
            text-align: center;
            font-size: 1.25em;
            color: white;
        }
    </style>

    <body syle='margin : 0px; overflow: hidden;'>
        <!-- minimal loader shown until image descriptors are loaded.
            Loading may take a while according to the device computational power -->
        <div class="arjs-loader">
            <div>Loading, please wait...</div>
        </div>

        <a-scene embedded arjs='trackingMethod: best; sourceType: webcam; debugUIEnabled: false; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960;'
                 vr-mode-ui='enabled: false;'
                 renderer='logarithmicDepthBuffer: true;'>
                 <a-assets>
                    <a-assets-item id='drone' src='https://raw.githubusercontent.com/alexteo/ARjs-3dObject/master/resources/drone.gltf'></a-assets-item>
                </a-assets>
                <a-nft
                    type='nft'
                    url='resources/nft/roseImage'
                    smooth='true'
                    smoothCount='10'
                    smoothTolerance='0.1'
                    smoothThreshold='5'
                >
                <!-- as a child of the a-nft entity, you can define the content to show. here's a GLTF model entity -->
                    <a-entity
                        id='drone_scene'
                        gltf-model="#drone"
                        scale='0.01 0.01 0.01'
                        shadow="cast:false; receive:false"
                        animation-mixer
                    >
                    </a-entity>
                </a-nft>
            <!-- static camera that moves according to the device movemenents -->
            <a-entity camera></a-entity>
        </a-scene>
    </body>
</html>